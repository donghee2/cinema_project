<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cinema.mapper.BookingMapper">
	<select id="selectMovieList" parameterType="map" resultType="booking">
		select timecode, starttime, endtime, mcode, screencode,
		(select screenname from screen where screencode = #{screenCode}) 
		screenname from time t where moviedate = #{sdate} and screencode = #{screenCode} and mcode = #{mcode}
	</select>
	<select id="selectSeatType" parameterType="String" resultType="String">
		select distinct seattype from seat where screencode = #{screenCode}
	</select>
	
	<insert id="insertBooking" parameterType="map">
		insert into booking values(BOOKING_PK_SEQ.NEXTVAL, #{id}, #{timeCode}, #{screenCode}, #{mcode}, #{totalPrice}, 0, 0, 0)
	</insert>
	
	<select id="selectSeatcode" parameterType="map" resultType="String">
		select seatcode from seat where screencode = #{screenCode} and seatno = #{seatNo}
	</select>
	
	<insert id="insertBookedSeat" parameterType="map">
		insert into booked_seats values(#{bookingCode}, #{seatCode}, #{screenCode})
	</insert>
	
	<select id="selectBookingcode" parameterType="map" resultType="String">
		select bookingcode from booking where user_email = #{id} and timecode = #{timeCode}
	</select>
	
	
</mapper>